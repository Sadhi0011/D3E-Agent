(Model OnlineCourseParticipant {
    name 'Online Course Participant'
    master #OnlineCourse
    package 'rewahr.com'
    properties [
        (employee {
            name 'Employee'
            type ({
                model #Employee
            })
        })
        (status {
            name 'Status'
            type ({
                optionSet #CourseAssessmentStatus
            })
        })
        (dueDate {
            name 'Due Date'
            type ({
                primitive Date
            })
        })
        (marks {
            name 'Marks'
            type ({
                primitive Double
            })
        })
        (attempts {
            name 'Attempts'
            type ({
                primitive Integer
            })
        })
        (passedOn {
            name 'Passed On'
            type ({
                primitive Date
            })
            readType ReadOnly
        })
        (validUpto {
            name 'Valid Upto'
            type ({
                primitive Date
            })
            readType ReadOnly
        })
    ]
    needCreatedDate true
    actions [
        (ModelAction recordDatesOnPassed {
            runOn OnUpdate
            block ```
                if (old.status != Pass && this.status == Pass) {
                    passedOn = Date.now();
                    CourseValidityLengthType type = onlineCourse.validityType;
                    switch (type) {
                        case Days:
                            validUpto = passedOn.plusDays(onlineCourse.validityLength);
                        case Months:
                            validUpto = passedOn.plusMonths(onlineCourse.validityLength);
                        case Years:
                            validUpto = passedOn.plusYears(onlineCourse.validityLength);
                    }
                }
            ```
        })
    ]
})