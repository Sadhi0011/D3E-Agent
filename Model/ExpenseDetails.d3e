(Model ExpenseDetails {
    name 'Expense Details'
    
    package 'rewa.hr.2'
    properties [
        (expenseType {
            name 'Expense Type'
            type ({
                model #ExpenseType
            })
            required true
        })
        (date {
            name 'Date'
            type ({
                primitive Date
            })
            required true
        })
        (departure {
            name 'Departure'
            type ({
                primitive String
            })
            existsIf `(expenseType != null && (expenseType.applicableClaimForm == ApplicableClaimCategory.Airfare || expenseType.applicableClaimForm == ApplicableClaimCategory.Transportation))`
            validations [
                ({
                    expression `(expenseType != null && (expenseType.applicableClaimForm == ApplicableClaimCategory.Airfare || expenseType.applicableClaimForm == ApplicableClaimCategory.Transportation))`
                    errorMsg 'Departure is required'
                })
            ]
        })
        (destination {
            name 'Destination'
            type ({
                primitive String
            })
            existsIf ` (expenseType != null && (expenseType.applicableClaimForm == ApplicableClaimCategory.Airfare || expenseType.applicableClaimForm == ApplicableClaimCategory.Transportation))`
            validations [
                ({
                    expression `(expenseType != null && (expenseType.applicableClaimForm == ApplicableClaimCategory.Airfare || expenseType.applicableClaimForm == ApplicableClaimCategory.Transportation))`
                    errorMsg 'Departure is required'
                })
            ]
        })
        (transportMeans {
            name 'Transport Means'
            type ({
                optionSet #TransportMeans
            })
            existsIf `(expenseType != null && (expenseType.applicableClaimForm == ApplicableClaimCategory.Airfare || expenseType.applicableClaimForm == ApplicableClaimCategory.Transportation))`
             validations [
                ({
                    expression `(expenseType != null && (expenseType.applicableClaimForm == ApplicableClaimCategory.Airfare || expenseType.applicableClaimForm == ApplicableClaimCategory.Transportation))`
                    errorMsg 'Transport Means is required'
                })
            ]
        })
        (remarks {
            name 'Remarks'
            type ({
                primitive String
            })
            required true
        })
        (currency {
            name 'Currency'
            type ({
                model #Currency
            })
            required true
        })
        (amount {
            name 'Amount'
            type ({
                primitive Double
            })
            required true
        })
        (custom {
            type ({
                primitive Boolean
            })
        })
        (baseAmount {
            name 'Base Amount'
            type ({
                primitive Double
            })
            computed true
            computation `amount * exchangeRate`
        })
        (exchangeRate {
            name 'Exchange Rate'
            type ({
                primitive Double
            })
        })
        (checkInDate {
            name 'Check In Date'
            type ({
                primitive Date
            })
            existsIf `expenseType != null && expenseType.applicableClaimForm == ApplicableClaimCategory.Hotel`
            validations [
                ({
                    expression  `expenseType != null && expenseType.applicableClaimForm == ApplicableClaimCategory.Hotel`
                    errorMsg 'Check in date is required'
                })
            ]
        })
        (checkOutDate {
            name 'Check Out Date'
            type ({
                primitive Date
            })
            existsIf `expenseType != null && expenseType.applicableClaimForm == ApplicableClaimCategory.Hotel`
            validations [
                ({
                    expression  `expenseType != null && expenseType.applicableClaimForm == ApplicableClaimCategory.Hotel`
                    errorMsg 'Check out date is required'
                })
            ]
        })
    ]
    creatable false
})